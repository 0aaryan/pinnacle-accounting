{{ define "main" }}
  {{ partial "page-header.html" . }}

  <section class="section">
    <div class="container">
      <div class="row justify-content-center align-items-center">
        <div class="col-lg-8 col-md-10" data-aos="fade-up">
          <div class="contact-form">
            <div class="mb-4 text-center">
              <h3>Book Free Consultation</h3>
            </div>
            <form id="services-form" action="https://script.google.com/macros/s/AKfycbw9Wqxrfb-JsWCLCHuEGgD1segrZBxCujL5PyJtlFh9bF7p3KLZO1RcINmmhHm91eC2JA/exec" method="POST" class="justify-content-center" autocomplete="on">
  
              <div class="form-group">
                <label class="h4 text-primary">Which services are you interested in?</label>
                <div>
                  <input type="radio" id="tax_preparation" name="services" value="Tax Preparation" required>
                  <label for="tax_preparation">Tax Preparation</label>
                </div>
                <div>
                  <input type="radio" id="financial_advisory" name="services" value="Financial Advisory">
                  <label for="financial_advisory">Financial Advisory</label>
                </div>
                <div>
                  <input type="radio" id="accounting" name="services" value="Accounting">
                  <label for="accounting">Accounting</label>
                </div>
                <div>
                  <input type="radio" id="other" name="services" value="Other">
                  <label for="other">Other</label>
                </div>
              </div>
            
              <div class="form-group">
                <label class="h4 text-primary">What is your requirement for?</label>
                <div>
                  <input type="radio" id="personal" name="requirement" value="Personal" required>
                  <label for="personal">Personal</label>
                </div>
                <div>
                  <input type="radio" id="business" name="requirement" value="Business">
                  <label for="business">Business</label>
                </div>
                <div>
                  <input type="radio" id="non_government" name="requirement" value="Non-Government">
                  <label for="non_government">Non-Government</label>
                </div>
                <div>
                  <input type="radio" id="charity_organization" name="requirement" value="Charity Organization">
                  <label for="charity_organization">Charity Organization</label>
                </div>
                <div>
                  <input type="radio" id="residential_society" name="requirement" value="Residential Society">
                  <label for="residential_society">Residential Society</label>
                </div>
              </div>
            
              <div class="form-group">
                <label class="h4 text-primary">What is your annual income before tax?</label>
                <div>
                  <input type="radio" id="less_than_2.5_lakhs" name="annual_income" value="Less than Rs 2.5 Lakhs" required>
                  <label for="less_than_2.5_lakhs">Less than Rs 2.5 Lakhs</label>
                </div>
                <div>
                  <input type="radio" id="2.5_to_4.9_lakhs" name="annual_income" value="Rs 2.5 - 4.9 Lakhs">
                  <label for="2.5_to_4.9_lakhs">Rs 2.5 - 4.9 Lakhs</label>
                </div>
                <div>
                  <input type="radio" id="5_to_10_lakhs" name="annual_income" value="Rs 5 - 10 Lakhs">
                  <label for="5_to_10_lakhs">Rs 5 - 10 Lakhs</label>
                </div>
                <div>
                  <input type="radio" id="10_to_50_lakhs" name="annual_income" value="Rs 10 - 50 Lakhs">
                  <label for="10_to_50_lakhs">Rs 10 - 50 Lakhs</label>
                </div>
                <div>
                  <input type="radio" id="more_than_50_lakhs" name="annual_income" value="More than Rs 50 Lakhs">
                  <label for="more_than_50_lakhs">More than Rs 50 Lakhs</label>
                </div>
                <div>
                  <input type="radio" id="prefer_not_to_say" name="annual_income" value="Prefer not to say">
                  <label for="prefer_not_to_say">Prefer not to say</label>
                </div>
              </div>
            
              <div class="form-group">
                <label class="h4 text-primary">What are your income sources?</label>
                <div>
                  <input type="checkbox" id="salary" name="income_sources" value="Salary">
                  <label for="salary">Salary</label>
                </div>
                <div>
                  <input type="checkbox" id="business" name="income_sources" value="Business">
                  <label for="business">Business</label>
                </div>
                <div>
                  <input type="checkbox" id="investments" name="income_sources" value="Investments">
                  <label for="investments">Investments</label>
                </div>
                <div>
                  <input type="checkbox" id="other_sources" name="income_sources" value="Other">
                  <label for="other_sources">Other</label>
                </div>
              </div>
            
              <div class="form-group">
                <label for="email" class="h4 text-primary">Your Email (required)</label>
                <input class="form-control shadow-none" id="email" name="email" type="email" placeholder="Enter your email" required />
              </div>
            
              <div class="form-group">
                <label for="phone" class="h4 text-primary">Your Phone (optional)</label>
                <input class="form-control shadow-none" id="phone" name="phone" type="tel" placeholder="Enter your phone" pattern="^\d{10}$" />
              </div>
            
              <button class="btn btn-primary w-100" type="button" onclick="submitForm()">Submit Request</button>
            </form>
            <script>
            function submitForm() {
              // Collect form data, including multiple checkbox values
              const form = document.getElementById("services-form");
              const formData = new FormData(form);
            
              // Collect income sources as comma-separated values
              const incomeSources = [];
              document.querySelectorAll('input[name="income_sources"]:checked').forEach(checkbox => {
                incomeSources.push(checkbox.value);
              });
              formData.set("income_sources", incomeSources.join(", "));
              console.log("Form data:", formData);
              // Submit form data using fetch
              fetch(form.action, {
                method: "POST",
                body: new URLSearchParams(formData)
              })
              .then(response => response.text())
              .then(data => {
                console.log("Form submitted:", data);
                alert("Thank you for your submission!");
                window.history.back();  // Redirect back to the previous page
              })
              .catch(error => {
                console.error("Error submitting form:", error);
                alert("There was an error submitting the form. Please try again.");
              });
            }
          </script>            
            
          </div>
        </div>
      </div>

      <div class="section pb-0">
        <div class="row justify-content-center">
          <div class="col-12">
            <div class="section-title text-center" data-aos="fade-up">
              <p class="text-uppercase">Contact us</p>
              <h2 class="title">Get In Touch</h2>
            </div>
          </div>

          {{ with site.Params.contact_info.phone }}
            <div class="col-xl-3 col-lg-4 col-md-6 contact-widget" data-aos="fade-up">
              <div class="block text-center">
                <h3 class="mb-4">Phone</h3>
                <ul class="list-unstyled">
                  {{ range . }}
                    {{ if . }}
                      <li>
                        <a href="tel:{{ . }}">
                          <i class="las la-phone"></i>
                          {{ . }}
                        </a>
                      </li>
                    {{ end }}
                  {{ end }}
                </ul>
              </div>
            </div>
          {{ end }}

          {{ with site.Params.contact_info.email }}
            <div class="col-xl-3 col-lg-4 col-md-6 contact-widget" data-aos="fade-up" data-aos-delay="100">
              <div class="block text-center">
                <h3 class="mb-4">Email Address</h3>
                <ul class="list-unstyled">
                  {{ range . }}
                    {{ if . }}
                      <li>
                        <a href="mailto:{{ . }}">
                          <i class="las la-envelope-open-text"></i>
                          {{ . }}
                        </a>
                      </li>
                    {{ end }}
                  {{ end }}
                </ul>
              </div>
            </div>
          {{ end }}

          {{ with site.Params.social }}
            <div class="col-xl-3 col-lg-4 col-md-12 contact-widget" data-aos="fade-up" data-aos-delay="200">
              <div class="block text-center">
                <h3 class="mb-4">Social Media</h3>
                <ul class="list-unstyled">
                  {{ range . }}
                    {{ if . }}
                      <li>
                        <a href="{{ .link }}">
                          <i class="{{ .icon }}"></i>
                          {{ .title }}
                        </a>
                      </li>
                    {{ end }}
                  {{ end }}
                </ul>
              </div>
            </div>
          {{ end }}
        </div>
      </div>
    </div>
  </section>
{{ end }}
